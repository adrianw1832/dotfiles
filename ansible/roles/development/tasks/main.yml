- name: Install apps with homebrew
  homebrew:
    name: '{{ brew_packages }}'
    state: latest
    update_homebrew: yes
  with_items: '{{ brew_packages }}'

- name: Install apps with homebrew cask
  homebrew_cask:
    name: '{{ cask_packages }}'
    state: present
  with_items: '{{ cask_packages }}'

- name: Create symlinks for dotfiles
  file:
    src: "{{ lookup('env','PWD') }}/{{ item.src }}"
    dest: '{{ item.dest }}'
    state: link
    force: yes
    follow: false
  with_items: '{{ dotfiles }}'

- name: Install Inconsolata for Powerline Nerd Font Complete
  copy:
    src: "{{ lookup('env','PWD') }}/Inconsolata for Powerline Nerd Font Complete.otf"
    dest: '$HOME/Library/Fonts'
    mode: 0644
